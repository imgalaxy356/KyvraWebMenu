#include "civetweb.h"
#include <stdio.h>
#include <stdlib.h>

static int menu_handler(struct mg_connection *conn, void *ignored) {
    mg_printf(conn,
              "HTTP/1.1 200 OK\r\nContent-Type: text/html\r\n\r\n"
              "<!DOCTYPE html><html><body><h1>DMA Web Menu</h1>"
              "<p>Aimbot: <input type='checkbox'></p>"
              "<p>Smoothing: <input type='range' min='1' max='100'></p>"
              "</body></html>");
    return 200;
}

int main(void) {
    const char *options[] = {
        "listening_ports", "8080",
        "num_threads", "4",
        "document_root", ".",  // Optional
        0
    };

    struct mg_callbacks callbacks = { 0 };
    struct mg_context *ctx = mg_start(&callbacks, 0, options);
    mg_set_request_handler(ctx, "/", menu_handler, 0);

    printf("Running on port 8080...\n");
    while (1) sleep(1); // Keep alive
}
